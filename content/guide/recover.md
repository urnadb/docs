---
title: 数据恢复
type: docs
prev: guide/operations
weight: 8
---

在 UrnaDB 的运行过程中，如果发生异常宕机，可能会导致部分数据处于未完成写入的状态，从而出现短暂的不一致性。UrnaDB 内置了完善的重启恢复机制，能够在服务重新启动时自动执行数据校验与修复，以最大程度确保数据的完整性与一致性，其具体实现细节已在 [**数据管理**](/guide/data) 章节中进行了详细说明。


> [!WARNING]
> UrnaDB 数据库启动默认的数据恢复顺序是： index.db 再 *.ids 最后才是 *.db 。在某些极端情况下会出现检查点和索引文件同时损毁情况，在这种情况下如果从这些半损毁文件中恢复数据，可能导致记录不一致甚至造成二次损坏。这时更安全可靠的做法是使用 UrnaDB 所提供的 **fix-dbfs** 工具在启动之前对数据目录中文件进行损坏数据整理，经过 **fix-dbfs** 修复后的数据文件才被视为安全且一致的有效数据文件，再让 UrnaDB 正常加载启动即可恢复宕机之前的数据状态。